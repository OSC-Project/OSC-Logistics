//Add dependencies
const express = require('express'),
      child_process = require('child_process');

//Creates app
const app = express();
app.use(express.urlencoded({extended : true}));

//Sends form to client
app.get('/', (req, res) => {
  res.sendFile('index.html', {root: __dirname})
})

//Handles GET Request
app.get('/findKey', function(req, res) {
  var key = req.param("key"), input = req.param("input");

  // BAD: Unsanitized user input is used to construct a regular expression
  var re = new RegExp(key, 'g');

  res.end(input.replace(re, 2).toString())

});

//Starts app
app.listen(process.env.port || 8080);
