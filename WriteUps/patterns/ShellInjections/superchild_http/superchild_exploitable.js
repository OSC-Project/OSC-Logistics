// Make sure the http and url libraries are loaded
const http = require('http'),
      url = require('url'),
      superchild = require('superchild');
// Create an http server
http.createServer(function (req, res) {
    // Lambda that defines how the http server reacts to <input
    // Responds with 200 in header
    res.writeHead(200, {'Content-Type': 'text/plain'});
    //Parses url
    let q = url.parse(req.url, true).query;
    //Creates child process for ls
    let child = superchild('ls ' + q.file_path);
    //On command, output is returned to console
    child.on('stdout_line', function (line) {
      console.log(line);
    });
    res.end()
}).listen(8080);
